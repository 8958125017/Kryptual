{"version":3,"file":"Container.js","sourceRoot":"","sources":["../../../../src/.internal/core/Container.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Container module\r\n * @todo Needs description\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"./Sprite\";\r\nimport { SpriteState } from \"./SpriteState\";\r\nimport { Animation } from \"./utils/Animation\";\r\nimport { List, IListEvents, ListGrouper } from \"./utils/List\";\r\nimport { VerticalAlign } from \"./defs/VerticalAlign\";\r\nimport { Align } from \"./defs/Align\";\r\nimport { Group } from \"./rendering/Group\";\r\nimport { Rectangle } from \"./elements/Rectangle\";\r\nimport { IPoint } from \"./defs/IPoint\";\r\nimport { registry } from \"./Registry\";\r\nimport { Preloader } from \"./elements/Preloader\";\r\nimport { DataItem } from \"./DataItem\";\r\nimport { Optional } from \"./utils/Type\";\r\nimport { InterfaceColorSet } from \"../core/utils/InterfaceColorSet\";\r\nimport { Paper } from \"./rendering/Paper\";\r\nimport * as $iter from \"./utils/Iterator\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $math from \"./utils/Math\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available font weights.\r\n *\r\n * @type {string}\r\n */\r\nexport type FontWeight = \"normal\" | \"bold\" | \"bolder\" | \"lighter\" | \"100\" | \"200\" | \"300\" | \"400\" | \"500\" | \"600\" | \"700\" | \"800\" | \"900\";\r\n\r\n/**\r\n * Defines available text decorations.\r\n *\r\n * @type {string}\r\n */\r\nexport type TextDecoration = \"none\" | \"underline\" | \"overline\" | \"line-through\" | \"blink\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n// Defined in DataItem.ts\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available [[Container]] layout types\r\n * @type {string}\r\n */\r\nexport type ContainerLayout = \"absolute\" | \"vertical\" | \"horizontal\" | \"grid\" | \"none\";\r\n\r\n/**\r\n * Defines properties for [[Container]]\r\n */\r\nexport interface IContainerProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Container layout.\r\n\t *\r\n\t * Options: \"absolute\" (default), \"vertical\", \"horizontal\", or \"grid\".\r\n\t *\r\n\t * @default \"absolute\"\r\n\t * @type {ContainerLayout}\r\n\t */\r\n\tlayout?: ContainerLayout;\r\n\r\n\t/**\r\n\t * Default font weight.\r\n\t *\r\n\t * @default \"normal\"\r\n\t * @type {FontWeight}\r\n\t */\r\n\tfontWeight?: FontWeight;\r\n\r\n\t/**\r\n\t * Font size for the text.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tfontSize?: number;\r\n\r\n\t/**\r\n\t * Default font decoration.\r\n\t *\r\n\t * @default \"none\"\r\n\t * @type {TextDecoration}\r\n\t */\r\n\ttextDecoration?: TextDecoration;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for the [[Container]]\r\n */\r\nexport interface IContainerEvents extends ISpriteEvents {\r\n\r\n\t/**\r\n\t * Invoked when a child Sprite is added to Container.\r\n\t */\r\n\tchildadded: {\r\n\t\tnewValue: Sprite;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when a child Sprite is removed from\r\n\t */\r\n\tchildremoved: {\r\n\t\toldValue: Sprite;\r\n\t};\r\n\r\n};\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IContainerAdapters extends ISpriteAdapters, IContainerProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Container can contain multiple sprites and arrange them in various layouts.\r\n *\r\n * @see {@link IContainerEvents} for a list of available events\r\n * @see {@link IContainerAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class Container extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @type {IContainerProperties}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _properties!: IContainerProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @type {IContainerAdapters}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _adapter!: IContainerAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IContainerEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IContainerEvents;\r\n\r\n\t/**\r\n\t * Container children. (sorted by layout)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {List<Sprite>}\r\n\t */\r\n\tprotected _childrenByLayout: Sprite[] = [];\r\n\r\n\t/**\r\n\t * Available width. (px)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _availableWidth: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Available height. (px)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _availableHeight: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_fixedWidthGrid description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _fixedWidthGrid: boolean;\r\n\r\n\t/**\r\n\t * Container's child elements. (sorded by their `zIndex`)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<List<Sprite>>}\r\n\t */\r\n\tprotected _children: $type.Optional<List<Sprite>>;\r\n\r\n\t/**\r\n\t * Horizontal alignement of Container's items\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Align>}\r\n\t */\r\n\tprotected _contentAlign: $type.Optional<Align>;\r\n\r\n\t/**\r\n\t * Vertical alignement of Container's items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<VerticalAlign>}\r\n\t */\r\n\tprotected _contentValign: $type.Optional<VerticalAlign>;\r\n\r\n\t/**\r\n\t * A [[Sprite]] instance to use as Container's background.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic _background: Sprite;\r\n\r\n\t/**\r\n\t * A reference to a [[Preloader]] element to show when Container is building\r\n\t * itself.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Preloader>}\r\n\t */\r\n\tprotected _preloader: $type.Optional<Preloader>;\r\n\r\n\t/**\r\n\t * Indicates if this container contains any focused elements, including\r\n\t * itself.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic hasFocused: boolean = false;\r\n\r\n\t/**\r\n\t * Specifies if, when state is applied on this container, the same state should be applied to container's children\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic setStateOnChildren: boolean = false;\r\n\r\n\t/*\r\n\t * @ignore\r\n\t */\r\n\tprotected _containerOverflowX: number = 0;\r\n\t/*\r\n\t * @ignore\r\n\t */\r\n\tprotected _containerOverflowY: number = 0;\r\n\r\n\t/*\r\n\t * @ignore\r\n\t */\r\n\tpublic layoutInvalid: boolean = false;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Container\";\r\n\r\n\t\tthis.element = this.paper.addGroup(\"g\");\r\n\r\n\t\tthis.pixelPerfect = false;\r\n\t\tthis._positionPrecision = 4;\r\n\r\n\t\tthis.group.add(this.element);\r\n\r\n\t\tthis.layout = \"absolute\";\r\n\t\tthis._fixedWidthGrid = false;\r\n\t\tthis.ignoreOverflow = false;\r\n\r\n\t\tthis.verticalCenter = \"top\";\r\n\t\tthis.horizontalCenter = \"left\";\r\n\r\n\t\tthis.children.events.on(\"insert\", this.handleChildAdded, this);\r\n\t\tthis.children.events.on(\"remove\", this.handleChildRemoved, this);\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles adding of a new child into `children`. Adding new children might\r\n\t * affect the whole layout so it needs to be revalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<Sprite>[\"insert\"]} event Event object\r\n\t * @todo Throw an exception on adding a disposed object. Of course it's better NOT TO add disposed objects, so that what we should focus on.\r\n\t */\r\n\tpublic handleChildAdded(event: IListEvents<Sprite>[\"insert\"]): void {\r\n\t\tlet child: Sprite = event.newValue;\r\n\r\n\t\t// Do not add disposed objects\r\n\t\tif ((<any>child).isDisposed()) {\r\n\t\t\tconsole.log(\"Added to children a disposed object!\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tif (this.element) {\r\n\t\t\tlet group = <Group>this.element;\r\n\t\t\tgroup.add(child.group);\r\n\t\t}\r\n\r\n\t\t// TODO this is hacky\r\n\t\tif (!$type.hasValue((<any>child)._childAddedDisposer)) {\r\n\t\t\t// it's not enough to listen to POSITION_CHANGED only, as some extra redrawals will happen.\r\n\t\t\t(<any>child)._childAddedDisposer = child.events.on(\"transformed\", this.handleChildTransform, this);\r\n\r\n\r\n\t\t\t//@todo: temporary commenting this because of error it causes when I add contents Container in AxisRange constructor. this._disposers.push((<any>child)._childAddedDisposer);\r\n\t\t}\r\n\r\n\t\tthis.invalidate();\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles child removal. Changing size of the child may change the\r\n\t * whole layout of the Container, hence layout needs to be invalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<Sprite>[\"remove\"]} event Event object\r\n\t */\r\n\tpublic handleChildRemoved(event: IListEvents<Sprite>[\"remove\"]): void {\r\n\t\tlet child: Sprite = event.oldValue;\r\n\r\n\t\t// TODO figure out why this is sometimes undefined\r\n\t\t// TODO this is hacky\r\n\t\tif ($type.hasValue((<any>child)._childAddedDisposer)) {\r\n\t\t\tthis.removeDispose((<any>child)._childAddedDisposer);\r\n\t\t\t//(<any>child)._childAddedDisposer.dispose();\r\n\t\t\tdelete (<any>child)._childAddedDisposer;\r\n\t\t}\r\n\r\n\t\tif (this.element) {\r\n\t\t\tlet group = <Group>this.element;\r\n\t\t\tgroup.removeElement(child.group);\r\n\t\t}\r\n\r\n\t\tif (child.isMeasured) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles child transformation. Changing size of the child may change the\r\n\t * whole layout of the Container, hence layout needs to be invalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"transformed\"]} event Event object\r\n\t */\r\n\tpublic handleChildTransform(event: AMEvent<Sprite, ISpriteEvents>[\"transformed\"]): void {\r\n\t\tlet child: Sprite = event.target;\r\n\t\tif (child.isMeasured) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates Container's layout, causing it to be re-evaluated again.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateLayout(): void {\r\n\t\tif (this.disabled || this.isTemplate || this.layout == \"none\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//this.validateLayout();\r\n\t\tif(!this.layoutInvalid){\r\n\t\t\tthis.layoutInvalid = true;\r\n\t\t\t$array.add(registry.invalidLayouts, this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, including layout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidate(): void {\r\n\t\tsuper.invalidate();\r\n\r\n\t\tthis.sortChildren();\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child.invalid) {\r\n\t\t\t\tchild.invalidate(); // this sorts invalid components in correct order\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, including layout AND all its child\r\n\t * elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic deepInvalidate(): void {\r\n\t\tsuper.invalidate();\r\n\t\tthis.sortChildren();\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.deepInvalidate();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.invalidate();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Appends `<defs>` section to the element. This section holds all the SVG\r\n\t * definitions for the element, such as filters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appendDefs(): void {\r\n\t\tsuper.appendDefs();\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.appendDefs();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.appendDefs();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of the child [[Sprite]] elements contained in this\r\n\t * Container.\r\n\t *\r\n\t * @return {List<Sprite>} List of child elements (Sprites)\r\n\t */\r\n\tpublic get children(): List<Sprite> {\r\n\t\t// @todo Review if we can add all children to disposers\r\n\t\tif (!this._children) {\r\n\t\t\tthis._children = new List<Sprite>();\r\n\t\t\tthis._children.events.on(\"insert\", (event) => {\r\n\t\t\t\tthis.dispatchImmediately(\"childadded\", { type: \"childadded\", newValue: event.newValue });\r\n\t\t\t});\r\n\r\n\t\t\tthis._children.events.on(\"insert\", (event) => {\r\n\t\t\t\tthis.dispatchImmediately(\"childremoved\", { type: \"childremoved\", newValue: event.newValue });\r\n\t\t\t});\r\n\t\t\t//this._disposers.push(new ListDisposer(this._children));\r\n\t\t}\r\n\t\treturn this._children;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets minimum width (px) for the Container. A container will not\r\n\t * auto-shrink beyond this value, even if child elements are smaller.\r\n\t *\r\n\t * @param {Optional<number>} value Width (px)\r\n\t */\r\n\tpublic set minWidth(value: Optional<number>) {\r\n\t\tif (this.setPropertyValue(\"minWidth\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current minimum width. (px)\r\n\t *\r\n\t * @return {Optional<number>} Width (px)\r\n\t */\r\n\tpublic get minWidth(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets minimum height (px) for the Container. A container will not\r\n\t * auto-shrink beyond this value, even if child elements are smaller.\r\n\t * @param {Optional<number>} value Height (px)\r\n\t */\r\n\tpublic set minHeight(value: Optional<number>) {\r\n\t\tif (this.setPropertyValue(\"minHeight\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current minimum height. (px)\r\n\t *\r\n\t * @return {Optional<number>} Height (px)\r\n\t */\r\n\tpublic get minHeight(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets maximum width (px) for the Container. A container will not\r\n\t * grow beyond this value, even if child elements do not fit.\r\n\t *\r\n\t * @param {Optional<number>} value Width (px)\r\n\t */\r\n\tpublic set maxWidth(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxWidth\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeWidth)) {\r\n\t\t\t\tthis.invalidateLayout();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current maximum width. (px)\r\n\t *\r\n\t * @return {Optional<number>} Width (px)\r\n\t */\r\n\tpublic get maxWidth(): number {\r\n\t\tlet maxWidth = this.getPropertyValue(\"maxWidth\");\r\n\r\n\t\tif (!$type.isNumber(maxWidth)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxWidth; // used to be pixelWidth, but this causes problems\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn maxWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets maximum height (px) for the Container. A container will not\r\n\t * grow beyond this value, even if child elements do not fit.\r\n\t *\r\n\t * @param {Optional<number>} value Height (px)\r\n\t */\r\n\tpublic set maxHeight(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxHeight\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeHeight)) {\r\n\t\t\t\tthis.invalidateLayout();\r\n\t\t\t}\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current maximum height. (px)\r\n\t *\r\n\t * @return {Optional<number>} Height (px)\r\n\t */\r\n\tpublic get maxHeight(): number {\r\n\t\tlet maxHeight = this.getPropertyValue(\"maxHeight\");\r\n\t\tif (!$type.isNumber(maxHeight)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxHeight; // used to be pixelHeight, but this causes problems\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxHeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates drawing of this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\t//this.validateLayout();\r\n\t\tthis.addChildren();\r\n\t\tsuper.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * Overrides the original `removeElement` so that Container's actual element\r\n\t * is not removed. We do not need to remove element of a Container.\r\n\t *\r\n\t * We do this because remove element each time will fail the `getBBox`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeElement(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sorts Container's children: the ones with variable width and height are\r\n\t * put at the end of the list (depending on layout type), so that fixed-width\r\n\t * ones can be drawn first.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite[]}  children  Container's children (elements)\r\n\t */\r\n\tpublic sortChildren(children?: Sprite[]): void {\r\n\r\n\t\tif (children) {\r\n\t\t\tlet length = children.length;\r\n\r\n\t\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\t\tlet child: Sprite = children[i];\r\n\t\t\t\t// TODO don't do anything if the indexes are the same ?\r\n\t\t\t\tif (this.children.indexOf(child) != -1) {\r\n\t\t\t\t\tthis.children.moveValue(child, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._childrenByLayout = [];\r\n\r\n\t\tif (this.layout == \"none\" || this.layout == \"absolute\" || !this.layout) {\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tthis._childrenByLayout.push(child);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Assemble fixed-size and relative lists\r\n\t\t\tlet fixed: Sprite[] = [];\r\n\t\t\tlet relative: Sprite[] = [];\r\n\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tif (this.layout == \"horizontal\" || this.layout == \"grid\") {\r\n\t\t\t\t\tif (!$type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trelative.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.layout == \"vertical\") {\r\n\t\t\t\t\tif (!$type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trelative.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Concat everything into list\r\n\t\t\tthis._childrenByLayout = fixed.concat(relative);\r\n\t\t}\r\n\r\n\t\tthis.calculateRelativeSize();\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates relative sizes for all Container's children.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t */\r\n\tpublic calculateRelativeSize(): void {\r\n\t\tlet totalRelativeWidth: number = 0;\r\n\t\tlet totalRelativeHeight: number = 0;\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\t// if child is not measured, we do not care about it at all.\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\ttotalRelativeWidth += child.percentWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\ttotalRelativeHeight += child.percentHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\tchild.relativeWidth = child.percentWidth / totalRelativeWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\t\tchild.relativeHeight = child.percentHeight / 100;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\tchild.relativeHeight = child.percentHeight / totalRelativeHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\t\tchild.relativeWidth = child.percentWidth / 100;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.layout == \"absolute\" || !child.isMeasured) {\r\n\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\tchild.relativeWidth = child.percentWidth / 100;\r\n\t\t\t\t}\r\n\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\tchild.relativeHeight = child.percentHeight / 100;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds all children to Container's SVG element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t */\r\n\tpublic addChildren(): void {\r\n\t\tthis.sortChildren();\r\n\t\t// add it to parent\r\n\t\tif (this.element) {\r\n\t\t\tlet zindexed = $array.copy(this._childrenByLayout);\r\n\t\t\tzindexed.sort((a: Sprite, b: Sprite) => {\r\n\t\t\t\treturn (a.zIndex || 0) - (b.zIndex || 0);\r\n\t\t\t});\r\n\t\t\t$array.each(zindexed, (child) => {\r\n\t\t\t\tif (child.group) {\r\n\t\t\t\t\tlet group = <Group>this.element;\r\n\t\t\t\t\tgroup.add(child.group);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new element of specific type and assigns as a child to the\r\n\t * Container.\r\n\t *\r\n\t * @param  {T extends Sprite}  Class type for the new element\r\n\t * @return {T}                 New element\r\n\t */\r\n\tpublic createChild<T extends Sprite>(classType: { new(): T; }): T {\r\n\t\tlet sprite = new classType();\r\n\t\tsprite.parent = this;\r\n\t\treturn sprite;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all Container's children without actually destroying them.\r\n\t *\r\n\t * To destroy children use `disposeChildren()` instead.\r\n\t */\r\n\tpublic removeChildren(): void {\r\n\t\t// remove all children\r\n\t\t// TODO use iteration instead\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child = <Sprite>this.children.getIndex(0);\r\n\t\t\tchild.parent = undefined;\r\n\t\t\tthis.children.removeValue(child);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes and destroys all Container's children.\r\n\t *\r\n\t * To remove children from Container without destroying them, use\r\n\t * `removeChildren()`.\r\n\t */\r\n\tpublic disposeChildren(): void {\r\n\t\t// TODO use iteration instead\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child = <Sprite>this.children.getIndex(0);\r\n\t\t\tchild.dispose();\r\n\t\t\tthis.children.removeValue(child);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An element to use as container background.\r\n\t *\r\n\t * @param {Sprite}  background  Background element\r\n\t */\r\n\tpublic set background(background: this[\"_background\"]) {\r\n\t\tif (this._background && this.background != background) {\r\n\t\t\tthis.removeDispose(this._background);\r\n\t\t}\r\n\r\n\t\tif (background) {\r\n\t\t\tthis._background = background;\r\n\t\t\tthis._disposers.push(background);\r\n\t\t\tthis.processBackground();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a [[Rectangle]] to use as a background for Container.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {this} Background Rectangle element\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new Rectangle();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Sprite} Background element\r\n\t */\r\n\tpublic get background(): this[\"_background\"] {\r\n\t\tif (!this._background) {\r\n\t\t\tthis._background = this.createBackground();\r\n\t\t\tthis.processBackground();\r\n\t\t}\r\n\r\n\t\treturn this._background;\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates background element with required properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processBackground(): void {\r\n\t\tlet background = this._background;\r\n\t\tif (background) {\r\n\t\t\tbackground.isMeasured = false;\r\n\t\t\tthis._background.fill = new InterfaceColorSet().getFor(\"background\");\r\n\t\t\tbackground.parent = this;\r\n\t\t\tbackground.isMeasured = false;\r\n\t\t\tthis.children.removeValue(background);\r\n\t\t\tthis._disposers.push(background);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the size of container and informs its children of how much size\r\n\t * they can occupy, by setting their relative `maxWidth` and `maxHeight`\r\n\t * properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateLayout(): void {\r\n\r\n\t\t$array.remove(registry.invalidLayouts, this);\r\n\r\n\t\tthis.layoutInvalid = false;\r\n\r\n\t\tthis._availableWidth = this.innerWidth;\r\n\t\tthis._availableHeight = this.innerHeight;\r\n\r\n\t\tlet measuredWidth = 0;\r\n\t\tlet measuredHeight = 0;\r\n\r\n\t\tlet allValid = true;\r\n\r\n\t\tif (this.children) {\r\n\r\n\t\t\tthis.sortChildren();\r\n\r\n\t\t\t// we itterate through list of children, sorted by layout priority. sprites which width non-relative width/height will go first, so we will reduce available width before proceeding to sprites with relative width/height\r\n\t\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\t\tlet maxWidth: number;\r\n\t\t\t\tlet maxHeight: number;\r\n\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\tmaxWidth = $math.round(this._availableWidth * child.relativeWidth);\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {// || this.layout == \"absolute\") { // not sure about absolute, but works well in cases like small map\r\n\t\t\t\t\t\tmaxWidth -= child.pixelMarginRight + child.pixelMarginLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tif (child.invalid) {\r\n\t\t\t\t\t\t\tchild.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\tmaxHeight = $math.round(this._availableHeight * child.relativeHeight);\r\n\t\t\t\t\tif (this.layout == \"vertical\") {//  || this.layout == \"absolute\") { // not sure about absolute, but works well in cases like small map\r\n\t\t\t\t\t\tmaxHeight -= child.pixelMarginTop + child.pixelMarginBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tif (child.invalid) {\r\n\t\t\t\t\t\t\tchild.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if child is valid\r\n\t\t\t\tif (child.invalid == false) {\r\n\r\n\t\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\t\tchild.maxWidth = maxWidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\tchild.maxHeight = maxHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (child.isMeasured) {\r\n\t\t\t\t\t\t// reduce available width if this is horizontal layout\r\n\t\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\t\tif (!$type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\t\t\tif (child.measuredWidth > 0) {\r\n\t\t\t\t\t\t\t\t\tthis._availableWidth -= child.measuredWidth + child.pixelMarginLeft + child.pixelMarginRight;\r\n\r\n\t\t\t\t\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\t\t\t\t\tthis._availableWidth -= child.overflowX;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// reduce available height if this is vertical layout\r\n\t\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\t\tif (!$type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\t\t\tif (child.measuredHeight > 0) {\r\n\t\t\t\t\t\t\t\t\tthis._availableHeight -= child.measuredHeight + child.pixelMarginTop + child.pixelMarginBottom;\r\n\r\n\t\t\t\t\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\t\t\t\t\tthis._availableHeight -= child.overflowY;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmeasuredWidth = Math.max(measuredWidth, child.measuredWidth);\r\n\t\t\t\t\t\tmeasuredHeight = Math.max(measuredHeight, child.measuredHeight);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// if child is not valid\r\n\t\t\t\telse {\r\n\t\t\t\t\t// tell child what maximum width/ height it can occupy\r\n\t\t\t\t\tif (child.isMeasured) {\r\n\t\t\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\t\t\tif (child.maxWidth != maxWidth) { // need to check this because of allValid\r\n\t\t\t\t\t\t\t\tchild.maxWidth = maxWidth;\r\n\t\t\t\t\t\t\t\tallValid = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\tif (child.maxHeight != maxHeight) { // need to check this because of allValid\r\n\t\t\t\t\t\t\t\tchild.maxHeight = maxHeight;\r\n\t\t\t\t\t\t\t\tallValid = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// this is needed in case we have some children which we have to valign to, for example, center\r\n\t\tthis._measuredWidth = measuredWidth + this.pixelPaddingLeft + this.pixelPaddingRight;\r\n\t\tthis._measuredHeight = measuredHeight + this.pixelPaddingTop + this.pixelPaddingBottom;\r\n\r\n\t\t// arrange after measuring, only if all children are valid already\r\n\t\tif (allValid) {\r\n\t\t\tthis.arrange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Arranges children according to layout specs and available space / child\r\n\t * sizes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic arrange(): void {\r\n\t\tif (this.children) {\r\n\t\t\t/*\r\n\t\t\t   in this method we not only arrange children but also find out the size of the container\r\n\t\t\t   it might seem it would be easier to get container size using sprite's measure method,\r\n\t\t\t   however it would return only actual size of the bbox. However as each child meight have\r\n\t\t\t   margins set, we need to check each child - we do it here.\r\n\r\n\t\t\t   This method doesn't do anything with DOM, so it's not expensive\r\n\t\t\t*/\r\n\t\t\tlet measuredWidth: number = 0;\r\n\t\t\tlet measuredHeight: number = 0;\r\n\r\n\t\t\tlet left: $type.Optional<number>;\r\n\t\t\tlet right: $type.Optional<number>;\r\n\t\t\tlet top: $type.Optional<number>;\r\n\t\t\tlet bottom: $type.Optional<number>;\r\n\r\n\t\t\tlet nextX: number = 0;\r\n\t\t\tlet nextY: number = 0;\r\n\t\t\tlet row: number = 0;\r\n\t\t\tlet column: number = 0;\r\n\r\n\t\t\tlet columnWidth: number[] = [];\r\n\t\t\tlet rowHeight: number[] = [];\r\n\r\n\t\t\tlet maxCellWidth: $type.Optional<number>;\r\n\t\t\tlet minCellWidth: $type.Optional<number>;\r\n\t\t\tlet columnCount: $type.Optional<number>;\r\n\r\n\t\t\tlet paddingLeft: number = this.pixelPaddingLeft;\r\n\t\t\tlet paddingRight: number = this.pixelPaddingRight;\r\n\t\t\tlet paddingTop: number = this.pixelPaddingTop;\r\n\t\t\tlet paddingBottom: number = this.pixelPaddingBottom;\r\n\r\n\t\t\t// GRID PRECALCULATIONS\r\n\t\t\tif (this.layout == \"grid\") {\r\n\r\n\t\t\t\tminCellWidth = $math.fitToRange($iter.min($iter.map(this.children.iterator(), (x) => x.measuredWidth)), 1, this.maxWidth);\r\n\t\t\t\tmaxCellWidth = $math.fitToRange($iter.max($iter.map(this.children.iterator(), (x) => x.measuredWidth)), 1, this.maxWidth);\r\n\r\n\t\t\t\tif (this.fixedWidthGrid) {\r\n\t\t\t\t\tcolumnCount = this.maxWidth / maxCellWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcolumnCount = this.maxWidth / minCellWidth; // predicted number of columns, yes it is usually much more than real number, but we fix that later\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumnCount = $math.max(1, Math.floor(columnCount));\r\n\t\t\t\tcolumnWidth = this.getColumnWidth(columnCount, maxCellWidth);\r\n\t\t\t}\r\n\r\n\t\t\tlet innerWidth: number = $math.max(this.innerWidth, this._measuredWidth - paddingLeft - paddingRight);\r\n\t\t\tlet innerHeight: number = $math.max(this.innerHeight, this._measuredHeight - paddingTop - paddingBottom);\r\n\r\n\t\t\tlet containerOverflowX: $type.Optional<number>;\r\n\t\t\tlet containerOverflowY: $type.Optional<number>;\r\n\r\n\t\t\t// we itterate through array of children\r\n\t\t\t// TODO use iterator instead\r\n\t\t\tfor (let i: number = 0, len = this.children.length; i < len; i++) {\r\n\t\t\t\tlet child = <Sprite>this.children.getIndex(i);\r\n\r\n\t\t\t\tlet x: $type.Optional<number> = undefined; // must reset\r\n\t\t\t\tlet y: $type.Optional<number> = undefined; // must reset\r\n\r\n\t\t\t\tlet childOverflowX: number = child.overflowX;\r\n\t\t\t\tlet childOverflowY: number = child.overflowY;\r\n\t\t\t\tlet childMarginLeft: number = child.pixelMarginLeft;\r\n\t\t\t\tlet childMarginRight: number = child.pixelMarginRight;\r\n\t\t\t\tlet childMarginTop: number = child.pixelMarginTop;\r\n\t\t\t\tlet childMarginBottom: number = child.pixelMarginBottom;\r\n\r\n\t\t\t\t// this is not good, as if we rotate sprite, it gets incorrect\r\n\t\t\t\t//\tlet childWidth: number = Math.min(child.pixelWidth, child.measuredWidth);\r\n\t\t\t\t//\tlet childHeight: number = Math.min(child.pixelHeight, child.measuredHeight);\r\n\r\n\t\t\t\tlet childWidth: number = child.measuredWidth;\r\n\t\t\t\tlet childHeight: number = child.measuredHeight;\r\n\r\n\t\t\t\tif (child.isMeasured && !child.disabled && !child.__disabled) {\r\n\t\t\t\t\tswitch (this.layout) {\r\n\t\t\t\t\t\t// absolute layout\r\n\t\t\t\t\t\tcase \"absolute\":\r\n\t\t\t\t\t\t\t// horizontal alignment\r\n\t\t\t\t\t\t\tswitch (child.align) {\r\n\t\t\t\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\t\t\t\tx = child.pixelMarginLeft - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\t\t\t\tx = (innerWidth - childWidth) / 2 - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\t\t\t\tx = innerWidth - childWidth - childMarginRight - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// vertical alignment\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = childMarginTop - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = (innerHeight - childHeight) / 2 - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = innerHeight - childHeight - childMarginBottom - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t// vertical layout\r\n\t\t\t\t\t\tcase \"vertical\":\r\n\r\n\t\t\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\t\tchildHeight = child.maxHeight;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\t\t\tif (!$type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\t\t\tchildHeight += childOverflowY;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tchildOverflowX = 0;\r\n\t\t\t\t\t\t\t\tchildOverflowY = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tswitch (child.align) {\r\n\t\t\t\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\t\t\t\tx = childMarginLeft - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\t\t\t\tx = (innerWidth - childWidth) / 2 - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\t\t\t\tx = innerWidth - childWidth - childMarginRight - childOverflowX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ty = nextY - childOverflowY + childMarginTop;\r\n\r\n\t\t\t\t\t\t\tnextY = childHeight + y + childOverflowY + childMarginBottom;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t// horizontal layout\r\n\t\t\t\t\t\tcase \"horizontal\":\r\n\r\n\t\t\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\t\tchildHeight = child.maxHeight;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\t\t\tif (!$type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\t\t\t\t\tchildWidth += childOverflowX;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tchildOverflowX = 0;\r\n\t\t\t\t\t\t\t\tchildOverflowY = 0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = child.pixelMarginTop - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = (innerHeight - childHeight) / 2 - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = innerHeight - childHeight - childMarginBottom - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tx = nextX - childOverflowX + childMarginLeft;\r\n\t\t\t\t\t\t\tnextX = x + childWidth + childOverflowX + childMarginRight;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"grid\":\r\n\t\t\t\t\t\t\tx = nextX - childOverflowX + childMarginLeft;\r\n\t\t\t\t\t\t\ty = nextY - childOverflowY + childMarginTop;\r\n\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + child.pixelMarginTop - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + (innerHeight - childHeight) / 2 - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + innerHeight - childHeight - childMarginBottom - childOverflowY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnextX += columnWidth[column];\r\n\r\n\t\t\t\t\t\t\trowHeight[row] = $math.max(rowHeight[row], childHeight);\r\n\t\t\t\t\t\t\tcolumn++;\r\n\r\n\t\t\t\t\t\t\tlet nextColumnWidth: $type.Optional<number> = columnWidth[column];\r\n\r\n\t\t\t\t\t\t\tif (!$type.isNumber(nextColumnWidth)) {\r\n\t\t\t\t\t\t\t\tnextColumnWidth = maxCellWidth;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t// here we reduce number of columns\r\n\t\t\t\t\t\t\tif (nextX > this.maxWidth - nextColumnWidth && column < columnCount) {\r\n\t\t\t\t\t\t\t\tcolumnCount = column - 1; // cause we added one and we need current item to go to next row\r\n\r\n\t\t\t\t\t\t\t\tnextX = 0;\r\n\t\t\t\t\t\t\t\tnextY = 0;\r\n\r\n\t\t\t\t\t\t\t\trow = 0;\r\n\t\t\t\t\t\t\t\tcolumn = 0;\r\n\r\n\t\t\t\t\t\t\t\tcolumnWidth = this.getColumnWidth(columnCount, maxCellWidth);\r\n\t\t\t\t\t\t\t\trowHeight = [];\r\n\r\n\t\t\t\t\t\t\t\ti = -1;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (column >= columnCount) {\r\n\t\t\t\t\t\t\t\tcolumn = 0;\r\n\t\t\t\t\t\t\t\tnextY += rowHeight[row];\r\n\t\t\t\t\t\t\t\trow++;\r\n\t\t\t\t\t\t\t\tnextX = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// NaN is handled by setter\r\n\t\t\t\t\tchild.moveTo({ x: x, y: y });\r\n\r\n\t\t\t\t\tlet childLeft = child.pixelX + childOverflowX;\r\n\t\t\t\t\tlet childRight = child.pixelX + childWidth + childOverflowX;\r\n\t\t\t\t\tlet childTop = child.pixelY + childOverflowY;\r\n\t\t\t\t\tlet childBottom = child.pixelY + childHeight + childOverflowY;\r\n\r\n\t\t\t\t\tchildLeft -= child.pixelMarginLeft;\r\n\t\t\t\t\tchildRight += child.pixelMarginRight;\r\n\r\n\t\t\t\t\tchildTop -= child.pixelMarginTop;\r\n\t\t\t\t\tchildBottom += child.pixelMarginBottom;\r\n\r\n\t\t\t\t\tif (childRight > right || !$type.isNumber(right)) {\r\n\t\t\t\t\t\tright = childRight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childLeft < left || !$type.isNumber(left)) {\r\n\t\t\t\t\t\tleft = childLeft;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childTop < top || !$type.isNumber(top)) {\r\n\t\t\t\t\t\ttop = childTop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childBottom > bottom || !$type.isNumber(bottom)) {\r\n\t\t\t\t\t\tbottom = childBottom;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmeasuredWidth = right - left;\r\n\t\t\t\t\tmeasuredHeight = bottom - top;\r\n\r\n\t\t\t\t\tcontainerOverflowX = $math.min(containerOverflowX, childLeft);\r\n\t\t\t\t\tcontainerOverflowY = $math.min(containerOverflowY, childTop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._containerOverflowX = containerOverflowX;\r\n\t\t\tthis._containerOverflowY = containerOverflowY;\r\n\r\n\t\t\tinnerWidth = $math.max(innerWidth, measuredWidth);\r\n\t\t\tinnerHeight = $math.max(innerHeight, measuredHeight);\r\n\r\n\t\t\t/// handle content alignment\r\n\t\t\tlet dx: $type.Optional<number>;\r\n\t\t\tlet dy: $type.Optional<number>;\r\n\r\n\t\t\tif (this.contentAlign == \"left\") {\r\n\t\t\t\tdx = 0;\r\n\t\t\t}\r\n\t\t\tif (this.contentAlign == \"center\") {\r\n\t\t\t\tdx = (innerWidth - measuredWidth) / 2;\r\n\t\t\t}\r\n\t\t\tif (this.contentAlign == \"right\") {\r\n\t\t\t\tdx = innerWidth - measuredWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.contentValign == \"top\") {\r\n\t\t\t\tdy = 0;\r\n\t\t\t}\r\n\t\t\tif (this.contentValign == \"middle\") {\r\n\t\t\t\tdy = (innerHeight - measuredHeight) / 2;\r\n\t\t\t}\r\n\t\t\tif (this.contentValign == \"bottom\") {\r\n\t\t\t\tdy = innerHeight - measuredHeight;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ($type.isNumber(dx)) {\r\n\t\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\t\tlet childOverflowX: number = child.overflowX;\r\n\r\n\t\t\t\t\tlet ddx: number = <number>dx;\r\n\r\n\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\tchildOverflowX = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tchild.x = child.pixelX + ddx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// individual grid elements can not be aligned vertically, that's why it's different from horizontal\r\n\t\t\t\t\tif (this.layout == \"grid\") {\r\n\t\t\t\t\t\tchild.x = child.pixelX + ddx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tddx += child.pixelMarginLeft;\r\n\t\t\t\t\t\tif (child.align == \"none\") {\r\n\t\t\t\t\t\t\tchild.x = ddx - childOverflowX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"absolute\") {\r\n\t\t\t\t\t\tddx += child.pixelMarginLeft;\r\n\t\t\t\t\t\tif (child.align == \"none\") {\r\n\t\t\t\t\t\t\tchild.x = ddx - childOverflowX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(dy)) {\r\n\t\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\t\tlet childOverflowY: number = child.overflowY;\r\n\r\n\t\t\t\t\tlet ddy: number = <number>dy;\r\n\r\n\t\t\t\t\tif (child.ignoreOverflow) {\r\n\t\t\t\t\t\tchildOverflowY = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\t\t\t\t\t\tif (child.valign == \"none\") {\r\n\t\t\t\t\t\t\tchild.y = ddy - childOverflowY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// individual grid elements can not be aligned vertically, that's why it's different from horizontal\r\n\t\t\t\t\tif (this.layout == \"grid\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\t\t\t\t\t\tchild.y = ddy - childOverflowY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tchild.y = child.pixelY + ddy;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"absolute\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\r\n\t\t\t\t\t\tif (child.valign == \"none\") {\r\n\t\t\t\t\t\t\tchild.y = ddy - childOverflowY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet oldBBox = this._bbox;\r\n\r\n\t\t\tmeasuredWidth = $math.round($math.max(measuredWidth, this.innerWidth), 1);\r\n\t\t\tmeasuredHeight = $math.round($math.max(measuredHeight, this.innerHeight), 1);\r\n\r\n\t\t\t// experimental\r\n\t\t\t// this prevents invalidating layout in such cases as scrolling category axis, when labels go outside bounds and results transformed event\r\n\t\t\t// todo: need to check if this doesn't cause other problems.\r\n\t\t\tif (this.maxWidth > 0) {\r\n\t\t\t\tmeasuredWidth = $math.min(measuredWidth, this.maxWidth);\r\n\t\t\t\tmeasuredWidth = $math.max(measuredWidth, this.minWidth);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.maxHeight > 0) {\r\n\t\t\t\tmeasuredHeight = $math.min(measuredHeight, this.maxHeight);\r\n\t\t\t\tmeasuredHeight = $math.max(measuredHeight, this.minHeight);\r\n\t\t\t}\r\n\r\n\t\t\tthis._bbox = { x: 0, y: 0, width: measuredWidth, height: measuredHeight };\r\n\r\n\t\t\tthis.updateBackground(measuredWidth, measuredHeight);\r\n\r\n\t\t\tthis.measure();\r\n\r\n\t\t\tif (!oldBBox || (oldBBox.width != measuredWidth || oldBBox.height != measuredHeight)) {\r\n\t\t\t\t// temp\r\n\t\t\t\tif (this.events.isEnabled(\"transformed\")) {\r\n\t\t\t\t\tlet event: AMEvent<this, IContainerEvents>[\"transformed\"] = {\r\n\t\t\t\t\t\ttype: \"transformed\",\r\n\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (oldBBox) {\r\n\t\t\t\t\t\tevent.dummyData = oldBBox.width + \" \" + measuredWidth + \"  \" + oldBBox.height + \" \" + measuredHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"transformed\", event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Update the background to fit into specific dimensions.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t * @param {number} measuredWidth  Wdith (px)\r\n\t * @param {number} measuredHeight Height (px)\r\n\t */\r\n\tpublic updateBackground(measuredWidth: number, measuredHeight: number): void {\r\n\t\tlet background: Sprite = this._background; // accessing protected, as getter creates instance if it doesn't exist\r\n\t\tif (background) {\r\n\t\t\tif ($type.isNumber(this.relativeWidth)) {\r\n\t\t\t\tbackground.width = this.maxWidth;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbackground.width = measuredWidth + this.pixelPaddingLeft + this.pixelPaddingRight;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this.relativeHeight)) {\r\n\t\t\t\tbackground.height = this.maxHeight;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbackground.height = measuredHeight + this.pixelPaddingTop + this.pixelPaddingBottom;\r\n\t\t\t}\r\n\r\n\t\t\tbackground.x = this.overflowX;\r\n\t\t\tbackground.y = this.overflowY;\r\n\r\n\t\t\tthis.group.addToBack(background.group);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns widths of all columns in a horizontal Container layout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}    columnCount   Number of columns\r\n\t * @param  {number}    maxCellWidth  Maximum width of one grid cell\r\n\t * @return {number[]}                An array of column widths\r\n\t */\r\n\tpublic getColumnWidth(columnCount: number, maxCellWidth: number): number[] {\r\n\t\tlet columnWidth: number[] = [];\r\n\t\tlet column: number = 0;\r\n\r\n\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif (this.fixedWidthGrid) {\r\n\t\t\t\t\tcolumnWidth[column] = maxCellWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcolumnWidth[column] = $math.max(columnWidth[column], child.measuredWidth + child.pixelMarginRight + child.pixelMarginLeft);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumn++;\r\n\r\n\t\t\t\tif (column == columnCount) {\r\n\t\t\t\t\tcolumn = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn columnWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Container layout.\r\n\t *\r\n\t * Options: \"absolute\" (default), \"vertical\", \"horizontal\", \"grid\", \"none\". \"none\" is quite the same as \"absolute\" - the objects will\r\n\t * be positioned at their x, y coordinates, the difference is that with \"absolute\" you can still use align/valign for children and with \"none\" you can not.\r\n\t * Use \"none\" as much as you can as it's most cpu-saving layout.\r\n\t *\r\n\t * @default \"absolute\"\r\n\t * @param {ContainerLayout} value Layout\r\n\t */\r\n\tpublic set layout(value: ContainerLayout) {\r\n\t\tif (this.setPropertyValue(\"layout\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ContainerLayout} Layout\r\n\t */\r\n\tpublic get layout(): ContainerLayout {\r\n\t\treturn this.getPropertyValue(\"layout\");\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical alignement of the elements for the vertical Container.\r\n\t *\r\n\t * This is used when Container is larger than the height of all its children.\r\n\t *\r\n\t * @param {VerticalAlign} value vertical alignement\r\n\t */\r\n\tpublic set contentValign(value: VerticalAlign) {\r\n\t\tthis._contentValign = value;\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {VerticalAlign} Vertical alignement\r\n\t */\r\n\tpublic get contentValign(): VerticalAlign {\r\n\t\treturn this._contentValign;\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal alignement of the elements for the horizontal Container.\r\n\t *\r\n\t * This is used when Container is larger than the height of all its children.\r\n\t *\r\n\t * @param {Align}  value  Horizontal alignement\r\n\t */\r\n\tpublic set contentAlign(value: Align) {\r\n\t\tthis._contentAlign = value;\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Align} Horizontal alignement\r\n\t */\r\n\tpublic get contentAlign(): Align {\r\n\t\treturn this._contentAlign;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the grid of the Container should use fixed width. Fixed width\r\n\t * grid will divide available space to all its columns/rows equally, without\r\n\t * adapting to actual child sizes or size requirements.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Should use fixed width grid?\r\n\t */\r\n\tpublic set fixedWidthGrid(value: boolean) {\r\n\t\tif (this._fixedWidthGrid != value) {\r\n\t\t\tthis._fixedWidthGrid = value;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Should use fixed width grid?\r\n\t */\r\n\tpublic get fixedWidthGrid(): boolean {\r\n\t\treturn this._fixedWidthGrid;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if point is within bounds of a container.\r\n\t *\r\n\t * @param  {IPoint}   point  A coordinate to check\r\n\t * @return {boolean}         `true` if it fits within container\r\n\t */\r\n\tpublic fitsToBounds(point: IPoint): boolean {\r\n\t\tlet x = point.x;\r\n\t\tlet y = point.y;\r\n\t\tlet deviation = 0.5; // sometimes coordinates are rounded to numbers like .999 so we add deviation here\r\n\t\tif (x >= -deviation && x <= this.pixelWidth + deviation && y >= -deviation && y <= this.pixelHeight + deviation) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties from different Container, including background\r\n\t * clone.\r\n\t *\r\n\t * @param {this}  source  Source Container to copy from\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.layout = source.layout;\r\n\t\tthis.setStateOnChildren = source.setStateOnChildren;\r\n\r\n\t\tif (source._background) {\r\n\t\t\tthis.background = source._background.clone();\r\n\t\t}\r\n\r\n\t\t$iter.each(source.children.iterator(), (child) => {\r\n\t\t\tif (child.shouldClone) {\r\n\t\t\t\tlet clonedChild: Sprite = child.clone();\r\n\t\t\t\tclonedChild.parent = this;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Preloader]] instance to be used when Container is busy.\r\n\t *\r\n\t * @param {Optional<Preloader>}  preloader  Preloader instance\r\n\t */\r\n\tpublic set preloader(preloader: $type.Optional<Preloader>) {\r\n\t\tif (this._preloader) {\r\n\t\t\tthis.removeDispose(this._preloader);\r\n\t\t}\r\n\t\tthis._preloader = preloader;\r\n\t\tif (preloader) {\r\n\t\t\tpreloader.parent = this.tooltipContainer;\r\n\t\t\tthis._disposers.push(preloader);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Preloader>} Preloader instance\r\n\t */\r\n\tpublic get preloader(): $type.Optional<Preloader> {\r\n\t\tconst preloader = this._preloader;\r\n\r\n\t\tif (preloader) {\r\n\t\t\treturn preloader;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.preloader;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets [[Paper]] instance to use to draw elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic setPaper(paper: Paper): void {\r\n\t\tsuper.setPaper(paper);\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.setPaper(paper);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.setPaper(paper);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Removes Container from the system-wide list of invalid Containers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeFromInvalids() {\r\n\t\tsuper.removeFromInvalids();\r\n\t\t$array.remove(registry.invalidLayouts, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a [[DataItem]] to be used as data for the Container.\r\n\t *\r\n\t * @todo Description\r\n\t * @param {DataItem} dataItem DataItem\r\n\t */\r\n\tprotected setDataItem(dataItem: DataItem) {\r\n\t\t// this place is potentially dangerous, as if we set datItem for some dummy container, all children dataItems will be overriden\r\n\t\t// the main reason for doing this is that we need a setDataItem code to be called for each sprite, otherwise property fields won't be\r\n\t\t// applied. Also, getting dataItem from parent all the time is more expensive than saving value.\r\n\t\tif (this._dataItem != dataItem) {\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tchild.dataItem = dataItem;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsuper.setDataItem(dataItem);\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Returns Tooltip X coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} X (px)\r\n\t */\r\n\tprotected getTooltipX(): number {\r\n\t\treturn super.getTooltipX() + this._containerOverflowX;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Tooltip Y coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Y (px)\r\n\t */\r\n\tprotected getTooltipY(): number {\r\n\t\treturn super.getTooltipY() + this._containerOverflowY;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Font size to be used for the text. The size can either be numeric, in\r\n\t * pxels, or other measurements.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {any} value Font size value\r\n\t */\r\n\tpublic set fontSize(value: any) {\r\n\t\tthis.setPropertyValue(\"fontSize\", value, true);\r\n\t\tthis.setSVGAttribute({ \"font-size\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any} Font size\r\n\t */\r\n\tpublic get fontSize(): any {\r\n\t\treturn this.getPropertyValue(\"fontSize\");\r\n\t}\r\n\r\n\t/**\r\n\t * Font weight to use for text.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {FontWeight} value Font weight\r\n\t */\r\n\tpublic set fontWeight(value: FontWeight) {\r\n\t\tthis.setPropertyValue(\"fontWeight\", value);\r\n\t\tthis.setSVGAttribute({ \"font-weight\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {FontWeight} Font weight\r\n\t */\r\n\tpublic get fontWeight(): FontWeight {\r\n\t\treturn this.getPropertyValue(\"fontWeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * A text decoration to use for text.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {TextDecoration}  value  Decoration\r\n\t */\r\n\tpublic set textDecoration(value: TextDecoration) {\r\n\t\tthis.setPropertyValue(\"textDecoration\", value);\r\n\t\tthis.setSVGAttribute({ \"text-decoration\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {TextDecoration} Decoration\r\n\t */\r\n\tpublic get textDecoration(): TextDecoration {\r\n\t\treturn this.getPropertyValue(\"textDecoration\");\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes (destroys) the element and all its children.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tthis.disposeChildren();\r\n\t\tsuper.dispose();\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a [[SpriteState]] on this element.\r\n\t *\r\n\t * The first parameter can either be a name state or a [[SpriteState]]\r\n\t * instance.\r\n\t *\r\n\t * When run, this method will apply SVG properties defined in a\r\n\t * [[SpriteState]], but only those that are relevant to this particular\r\n\t * element, i.e. are in the `properties` array.\r\n\t *\r\n\t * @see {@link SpriteState}\r\n\t * @param {string | SpriteState} value               A state - name key or instance\r\n\t * @param {number}               transitionDuration  Duration of the transition between current and new state\r\n\t * @param {number) => number}    easing              An easing function\r\n\t */\r\n\tpublic setState(value: string | SpriteState<this[\"_properties\"], this[\"_adapter\"]>, transitionDuration?: number, easing?: (value: number) => number): $type.Optional<Animation> {\r\n\r\n\t\tlet stateName = value;\r\n\t\tif (value instanceof SpriteState) {\r\n\t\t\tstateName = value.name;\r\n\t\t}\r\n\r\n\t\tif (this.setStateOnChildren) {\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tchild.setState(stateName, transitionDuration, easing);\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn super.setState(value, transitionDuration, easing);\r\n\t}\r\n\r\n}\r\n"]}